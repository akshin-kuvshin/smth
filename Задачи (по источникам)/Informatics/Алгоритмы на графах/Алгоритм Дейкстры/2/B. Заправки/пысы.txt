См. задачу №7 "Заправки" (Алгоритмы на графах -> Алгоритм Дейкстры -> 1 -> C. Заправки).