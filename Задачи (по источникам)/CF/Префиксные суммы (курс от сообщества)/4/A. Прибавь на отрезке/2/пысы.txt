исходный разностный массив заполнен нулями. обработав все запросы, считаем префиксные суммы разностного массива и прибавляем их к соответствующим элементам исходного массива (сам исходный массив в таком случае терять нельзя).